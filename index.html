<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>xwillmadeit</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="xwillmadeit">
<meta property="og:url" content="https://xwillmadeit.github.io/index.html">
<meta property="og:site_name" content="xwillmadeit">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="xwillmadeit">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="xwillmadeit" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://o9623d0wj.bkt.clouddn.com/avatar.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">xwillmadeit</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						<li>Links</li>
						
						
						<li>Über</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
				        	<li><a href="https://github.com">my sites</a></li>
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Flux/" style="font-size: 10px;">Flux</a> <a href="/tags/RegExp/" style="font-size: 10px;">RegExp</a> <a href="/tags/angular/" style="font-size: 13.33px;">angular</a> <a href="/tags/apply/" style="font-size: 13.33px;">apply</a> <a href="/tags/bind/" style="font-size: 10px;">bind</a> <a href="/tags/call/" style="font-size: 13.33px;">call</a> <a href="/tags/cookie/" style="font-size: 10px;">cookie</a> <a href="/tags/cordova/" style="font-size: 13.33px;">cordova</a> <a href="/tags/css/" style="font-size: 16.67px;">css</a> <a href="/tags/css3/" style="font-size: 10px;">css3</a> <a href="/tags/directive/" style="font-size: 10px;">directive</a> <a href="/tags/es6/" style="font-size: 10px;">es6</a> <a href="/tags/eslint/" style="font-size: 10px;">eslint</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/gulp/" style="font-size: 10px;">gulp</a> <a href="/tags/hip-hop/" style="font-size: 10px;">hip hop</a> <a href="/tags/ionic/" style="font-size: 13.33px;">ionic</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/men/" style="font-size: 10px;">men</a> <a href="/tags/music/" style="font-size: 13.33px;">music</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nodejs/" style="font-size: 13.33px;">nodejs</a> <a href="/tags/oop/" style="font-size: 10px;">oop</a> <a href="/tags/queryString/" style="font-size: 10px;">queryString</a> <a href="/tags/rap/" style="font-size: 10px;">rap</a> <a href="/tags/react/" style="font-size: 13.33px;">react</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/redux/" style="font-size: 10px;">redux</a> <a href="/tags/rem/" style="font-size: 10px;">rem</a> <a href="/tags/sublime/" style="font-size: 10px;">sublime</a> <a href="/tags/this/" style="font-size: 10px;">this</a> <a href="/tags/viewport/" style="font-size: 10px;">viewport</a> <a href="/tags/views/" style="font-size: 10px;">views</a> <a href="/tags/webpack/" style="font-size: 10px;">webpack</a> <a href="/tags/倒计时/" style="font-size: 10px;">倒计时</a> <a href="/tags/动画/" style="font-size: 10px;">动画</a> <a href="/tags/居中/" style="font-size: 10px;">居中</a> <a href="/tags/异步/" style="font-size: 10px;">异步</a> <a href="/tags/思想/" style="font-size: 10px;">思想</a> <a href="/tags/杂谈/" style="font-size: 10px;">杂谈</a> <a href="/tags/正则表达式/" style="font-size: 10px;">正则表达式</a> <a href="/tags/移动端/" style="font-size: 10px;">移动端</a> <a href="/tags/纯音乐/" style="font-size: 10px;">纯音乐</a> <a href="/tags/面试/" style="font-size: 10px;">面试</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://abingmanling.github.io/">郭敬文的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">Who the hell am I?</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">xwillmadeit</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="http://o9623d0wj.bkt.clouddn.com/avatar.jpg" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">xwillmadeit</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-gulp最常用workflow" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/09/04/gulp最常用workflow/" class="article-date">
  	<time datetime="2016-09-04T11:35:18.000Z" itemprop="datePublished">2016-09-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/04/gulp最常用workflow/">gulp最常用workflow</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="安装-sass，browser-sync，babel-等"><a href="#安装-sass，browser-sync，babel-等" class="headerlink" title="安装 sass，browser-sync，babel 等"></a>安装 sass，browser-sync，babel 等</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save-dev gulp gulp-sass gulp-babel babel-preset-es2015 browser-sync</span><br></pre></td></tr></table></figure>
<h2 id="使用-es6-编写-gulpfile"><a href="#使用-es6-编写-gulpfile" class="headerlink" title="使用 es6 编写 gulpfile"></a>使用 es6 编写 gulpfile</h2><p>将原 gulpfile.js 命名为 gulpfile.babel.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch gulpfile.babel.js</span><br></pre></td></tr></table></figure>
<p>安装 babel-core</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save-dev babel-core</span><br></pre></td></tr></table></figure>
<p>完整 gulp 配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gulp <span class="keyword">from</span> <span class="string">'gulp'</span>;</span><br><span class="line"><span class="keyword">import</span> sass <span class="keyword">from</span> <span class="string">'gulp-sass'</span>;</span><br><span class="line"><span class="keyword">import</span> babel <span class="keyword">from</span> <span class="string">'gulp-babel'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; create &#125; <span class="keyword">from</span> <span class="string">'browser-sync'</span>;</span><br><span class="line"><span class="keyword">const</span> browserSync = create();</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'scss'</span>, () =&gt; &#123;</span><br><span class="line">	gulp.src(<span class="string">'src/scss/*.scss'</span>)</span><br><span class="line">		.pipe(sass().on(<span class="string">'error'</span>, sass.logError))</span><br><span class="line">		.pipe(gulp.dest(<span class="string">'build/css'</span>))</span><br><span class="line">		.pipe(browserSync.stream());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'js'</span>, () =&gt; &#123;</span><br><span class="line">	gulp.src(<span class="string">'src/js/*.js'</span>)</span><br><span class="line">		.pipe(babel(&#123;presets: [<span class="string">'es2015'</span>]&#125;))</span><br><span class="line">		.pipe(gulp.dest(<span class="string">'build/js'</span>))</span><br><span class="line">		.pipe(browserSync.stream());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'default'</span>, () =&gt; &#123;</span><br><span class="line">	browserSync.init(&#123;</span><br><span class="line">		server: &#123;</span><br><span class="line">			baseDir: <span class="string">'./'</span></span><br><span class="line">		&#125;,</span><br><span class="line">		browser: <span class="string">"google chrome"</span>  <span class="comment">//设置 browser-sync 默认浏览器为 chrome</span></span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	gulp.watch(<span class="string">'src/scss/*.scss'</span>, [<span class="string">'scss'</span>]);</span><br><span class="line">	gulp.watch(<span class="string">'src/js/*.js'</span>, [<span class="string">'js'</span>]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/xwillmadeit/xwillworkflow" target="_blank" rel="external">xwillworkflow源码</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gulp/">gulp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





  
    <article id="post-eslint" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/09/02/eslint/" class="article-date">
  	<time datetime="2016-09-02T02:00:40.000Z" itemprop="datePublished">2016-09-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/02/eslint/">eslint</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="sublime-中使用-eslint"><a href="#sublime-中使用-eslint" class="headerlink" title="sublime 中使用 eslint"></a>sublime 中使用 eslint</h2><ol>
<li><p>全局安装 npm install -g eslint</p>
</li>
<li><p>sublime 中安装 eslint 插件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">eslint</span><br><span class="line">SublimeLinter</span><br><span class="line">SublimeLinter-contrib-eslint</span><br></pre></td></tr></table></figure>
</li>
<li><p>项目中安装 npm install –save-dev eslint</p>
</li>
<li><p>初始化 eslint 配置<br>eslint –init</p>
</li>
</ol>
<p>一路回车即可</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/eslint/">eslint</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sublime/">sublime</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





  
    <article id="post-js异步编程" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/08/19/js异步编程/" class="article-date">
  	<time datetime="2016-08-19T06:16:24.000Z" itemprop="datePublished">2016-08-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/19/js异步编程/">js异步编程</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//promise</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">	setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">        	resolve(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        reject(<span class="number">2</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">a.then(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(res); <span class="comment">//1</span></span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(err); </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//promise.all</span></span><br><span class="line"><span class="keyword">var</span> sum = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">arg1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            resolve(sum += <span class="number">10</span>); <span class="comment">//20</span></span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">arg2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            resolve(sum += <span class="number">30</span>); <span class="comment">//50</span></span><br><span class="line">        &#125;, <span class="number">2000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.all([arg1(), arg2()]).then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value[<span class="number">0</span>] * value[<span class="number">1</span>]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="external">文档</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/异步/">异步</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





  
    <article id="post-js一些令我困惑的知识点" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/08/04/js一些令我困惑的知识点/" class="article-date">
  	<time datetime="2016-08-04T01:54:09.000Z" itemprop="datePublished">2016-08-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/04/js一些令我困惑的知识点/">js一些令我困惑的知识点</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="严格模式下的-call-this"><a href="#严格模式下的-call-this" class="headerlink" title="严格模式下的 call(this)"></a>严格模式下的 call(this)</h2><p>常看到这样的代码<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="meta">	'use strict'</span></span><br><span class="line">	<span class="comment">//some code</span></span><br><span class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span> == <span class="built_in">window</span>)  <span class="comment">//true</span></span><br><span class="line">&#125;).call(<span class="keyword">this</span>);</span><br></pre></td></tr></table></figure></p>
<p>和下面的立即执行函数有什么不同吗？<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="meta">	'use strict'</span></span><br><span class="line">	<span class="comment">//some code</span></span><br><span class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span> == <span class="built_in">window</span>)  <span class="comment">//false, this == undefined</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></p>
<p>严格模式下，this != window，需要强制改正 this 的指向。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





  
    <article id="post-angular细节问题整理" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/26/angular细节问题整理/" class="article-date">
  	<time datetime="2016-07-26T02:54:03.000Z" itemprop="datePublished">2016-07-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/26/angular细节问题整理/">angular细节问题整理</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="directive-中监听-controller-多个对象或数组的变化"><a href="#directive-中监听-controller-多个对象或数组的变化" class="headerlink" title="directive 中监听 controller 多个对象或数组的变化"></a>directive 中监听 controller 多个对象或数组的变化</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//init</span></span><br><span class="line">$scope.chartData = &#123;</span><br><span class="line">   xdata: [],</span><br><span class="line">   ydata: &#123;</span><br><span class="line">    guestData: [],</span><br><span class="line">    ...</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//change data，注意这里必须重新赋值，push 没用</span></span><br><span class="line">$scope.change = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $scope.chartData.xdata = [<span class="number">1</span>];</span><br><span class="line">	$scope.chartData.ydata = &#123;</span><br><span class="line">        guestData: [<span class="number">1</span>,<span class="number">2</span>],</span><br><span class="line">        browseData: [<span class="number">1</span>,<span class="number">2</span>],</span><br><span class="line">        loseData: [<span class="number">1</span>,<span class="number">2</span>],</span><br><span class="line">        avgData: [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;chart-line xdata=<span class="string">"chartData.xdata"</span> ydata=<span class="string">"chartData.ydata"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">chart-line</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//directive</span><br><span class="line">scope: &#123;</span><br><span class="line">    xdata: '=',</span><br><span class="line">    ydata: '='</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//只要 xdata 或 ydata 任意一个对象变化即可</span><br><span class="line">scope.$watchCollection('[xdata, ydata]', function(newVal,oldVal) &#123;</span><br><span class="line">	console.log(newVal);</span><br><span class="line">&#125;)</span><br><span class="line">//watchGroup 亦可，注意写法差别</span><br><span class="line">scope.$watchGroup(['xdata', 'ydata'], function(newVal,oldVal) &#123;</span><br><span class="line">	console.log(newVal);</span><br><span class="line">&#125;)</span></span><br></pre></td></tr></table></figure>
<h2 id="apply-和-digest"><a href="#apply-和-digest" class="headerlink" title="$apply 和 $digest"></a>$apply 和 $digest</h2><p>什么时候用 <b>$apply</b> 和 <b>$digest</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;rootName&#125;&#125;</span><br><span class="line">&lt;div ng-controller=<span class="string">"testCtrl"</span>&gt;</span><br><span class="line">  &#123;&#123;name&#125;&#125;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">app.controller(<span class="string">'testCtrl'</span>, [<span class="string">'$scope'</span>, <span class="string">'$rootScope'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope, $rootScope</span>)</span>&#123;</span><br><span class="line">    $rootScope.rootName = <span class="string">'rootName'</span>;</span><br><span class="line">    $scope.name = <span class="string">'scopeName'</span>;</span><br><span class="line"></span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'in'</span>);</span><br><span class="line">      $scope.$apply(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $rootScope.rootName = <span class="string">'rootName2'</span>;</span><br><span class="line">        $scope.name = <span class="string">'scopeName2'</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">// $scope.$apply(); 不推荐</span></span><br><span class="line">    &#125;,<span class="number">2000</span>);</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>当使用非 angular 包装方法，如 setTimeout 等原生 js 方法去改变 model 值的时候，需手动调用 $apply 或 $digest 去更新 view 显示。</li>
<li>$apply 会一直向上检查到 $rootScope 变化。$digest 只会检查自己及子 scope 变化。</li>
<li>使用 $apply 时，总是 $scope.$apply(function(){}) 这样使用，因为这样 angular 会 try… catch…</li>
</ul>
</blockquote>
<p><a href="http://www.sitepoint.com/understanding-angulars-apply-digest/" target="_blank" rel="external">理解 $apply 和 $digest</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/angular/">angular</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





  
    <article id="post-redux深入研究" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/13/redux深入研究/" class="article-date">
  	<time datetime="2016-07-13T01:52:33.000Z" itemprop="datePublished">2016-07-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/13/redux深入研究/">redux深入研究</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="redux-到底是什么？"><a href="#redux-到底是什么？" class="headerlink" title="redux 到底是什么？"></a>redux 到底是什么？</h2><p>首先明确一个概念，redux 是管理 javascript 应用状态 state 的框架，与 react 无关！与 react 无关！与 react 无关！</p>
<p>为什么会出现 redux，redux 出现的动机是什么？<br><a href="http://cn.redux.js.org/docs/introduction/Motivation.html" target="_blank" rel="external">http://cn.redux.js.org/docs/introduction/Motivation.html</a></p>
<p>其实 redux 就是一个管理 js 中复杂的 state 变化的一个 js 库。</p>
<h2 id="Redux-三大原则"><a href="#Redux-三大原则" class="headerlink" title="Redux 三大原则"></a>Redux 三大原则</h2><ol>
<li><p>单一数据源</p>
<blockquote>
<p>整个应用的 state 被储存在一棵 object tree 中，并且这个 object tree 只存在于唯一一个 store 中。</p>
</blockquote>
</li>
<li><p>State 是只读的</p>
<blockquote>
<p>惟一改变 state 的方法就是触发 action，action 是一个用于描述已发生事件的普通对象。</p>
</blockquote>
</li>
<li><p>使用纯函数来执行修改</p>
<blockquote>
<p>为了描述 action 如何改变 state tree ，你需要编写 reducers。</p>
</blockquote>
</li>
</ol>
<h2 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h2><p>定义：</p>
<blockquote>
<p>Action 是把数据从应用（译者注：这里之所以不叫 view 是因为这些数据有可能是服务器响应，用户输入或其它非 view 的数据 ）传到 store 的有效载荷。它是 store 数据的唯一来源。一般来说你会通过 store.dispatch() 将 action 传到 store。</p>
</blockquote>
<p>注意：</p>
<blockquote>
<p>Action 本质上是 JavaScript 普通对象。我们约定，action 内必须使用一个字符串类型的 type 字段来表示将要执行的动作。多数情况下，type 会被定义成字符串常量。当应用规模越来越大时，建议使用单独的模块或文件来存放 action。</p>
</blockquote>
<p>Action 中还有个概念叫 Action Creator</p>
<blockquote>
<p>Action 创建函数 就是生成 action 的方法。“action” 和 “action 创建函数” 这两个概念很容易混在一起，使用时最好注意区分。<br>在 Redux 中的 action 创建函数只是简单的返回一个 action:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addTodo</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: ADD_TODO,</span><br><span class="line">    text</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="Reducer"><a href="#Reducer" class="headerlink" title="Reducer"></a>Reducer</h2><p>定义：</p>
<blockquote>
<p>Action 只是描述了有事情发生了这一事实，并没有指明应用如何更新 state。而这正是 reducer 要做的事情。</p>
</blockquote>
<p>注意，永远不要在 reducer 中做以下事情：<br><strong>修改传入参数</strong><br><strong>执行有副作用的操作，如 API 请求和路由跳转</strong><br><strong>调用非纯函数，如 Date.now() 或 Math.random()</strong></p>
<p>只需要谨记 reducer 一定要保持纯净。只要传入参数相同，返回计算得到的下一个 state 就一定相同。没有特殊情况、没有副作用，没有 API 请求、没有变量修改，单纯执行计算。</p>
<p>看一段代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initialState = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">todoApp</span>(<span class="params">state = initialState, action</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 这里暂不处理任何 action，</span></span><br><span class="line">  <span class="comment">// 仅返回传入的 state。</span></span><br><span class="line">  <span class="keyword">return</span> state</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>可以通过 es 参数默认值来初始化 state 的值。</p>
<p>这里注意两点非常重要：</p>
<ol>
<li>不要修改 state。 可使用 Object.assign() 新建一个副本。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign(&#123;&#125;, state, &#123;&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>不能这样使用<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign(state, &#123;&#125;)</span><br></pre></td></tr></table></figure></p>
<p>因为它会改变第一个参数的值。你必须把第一个参数设置为空对象。你也可以开启对ES7提案对象展开运算符的支持, 从而使用<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; ...state, &#123;&#125;&#125;</span><br></pre></td></tr></table></figure></p>
<p>达到相同的目的。</p>
<p><strong>时刻谨记永远不要在克隆 state 前修改它</strong></p>
<ol>
<li>在 default 情况下返回旧的 state。遇到未知的 action 时，一定要返回旧的 state。</li>
</ol>
<h2 id="Store"><a href="#Store" class="headerlink" title="Store"></a>Store</h2><p>Store 有以下职责：</p>
<ol>
<li>维持应用的 state；</li>
<li>提供 getState() 方法获取 state；</li>
<li>提供 dispatch(action) 方法更新 state；</li>
<li>通过 subscribe(listener) 注册监听器;</li>
<li>通过 subscribe(listener) 返回的函数注销监听器。</li>
</ol>
<p>再次强调一下：<br><strong>Redux 应用只有一个单一的 store。当需要拆分数据处理逻辑时，你应该使用 reducer 组合 而不是创建多个 store</strong></p>
<p>store有几个方法：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取 state</span></span><br><span class="line">store.getState()</span><br><span class="line"><span class="comment">//接受action，更新 state</span></span><br><span class="line">store.dispatch(action)</span><br><span class="line"><span class="comment">//注册监听器</span></span><br><span class="line"><span class="keyword">let</span> unsubscribe = store.subscribe(listener)</span><br><span class="line"><span class="comment">//通过 subscribe(listener) 返回的函数注销监听器</span></span><br><span class="line">unsubscribe()</span><br></pre></td></tr></table></figure></p>
<p>另外已有的 reducer 创建 store 是非常容易的<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> store = createStore(reducers);</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>createStore() 的第二个参数是可选的, 用于设置 state 初始状态。这对开发同构应用时非常有用，服务器端 redux 应用的 state 结构可以与客户端保持一致, 那么客户端可以将从网络接收到的服务端 state 直接用于本地数据初始化。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> store = createStore(todoApp, <span class="built_in">window</span>.STATE_FROM_SERVER)</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="数据流"><a href="#数据流" class="headerlink" title="数据流"></a>数据流</h2><p><strong>严格的单向数据流是 Redux 架构的设计核心</strong></p>
<p>Redux 应用中数据的生命周期遵循下面 4 个步骤：</p>
<ol>
<li><p>调用 store.dispatch(action)，你可以在任何地方调用 store.dispatch(action)，包括组件中、XHR 回调中、甚至定时器中。</p>
</li>
<li><p>Redux store 调用传入的 reducer 函数，Store 会把两个参数传入 reducer： 当前的 state 树和 action。</p>
</li>
<li><p>根 reducer 应该把多个子 reducer 输出合并成一个单一的 state 树。</p>
</li>
<li><p>Redux store 保存了根 reducer 返回的完整 state 树。这个新的树就是应用的下一个 state！所有订阅 store.subscribe(listener) 的监听器都将被调用；监听器里可以调用 store.getState() 获得当前 state。</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createStore&#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reducer = (state=<span class="number">0</span>, action) =&gt; &#123;</span><br><span class="line">  <span class="keyword">switch</span>(action.type)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'INC'</span>:</span><br><span class="line">      state+=<span class="number">1</span>;</span><br><span class="line">      <span class="keyword">break</span>; </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> state;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer);</span><br><span class="line"></span><br><span class="line">store.subscribe(() =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'store changed'</span>, store.getState());</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">store.dispatch(&#123;type: <span class="string">'INC'</span>&#125;);</span><br></pre></td></tr></table></figure>
<p>从上面这段代码来看 redux 的三大原则</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/redux/">redux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





  
    <article id="post-关于正则" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/08/关于正则/" class="article-date">
  	<time datetime="2016-07-08T03:37:36.000Z" itemprop="datePublished">2016-07-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/08/关于正则/">关于正则</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="如何在-chrome-中使用正则"><a href="#如何在-chrome-中使用正则" class="headerlink" title="如何在 chrome 中使用正则"></a>如何在 chrome 中使用正则</h2><p>需求：在页面 <a href="http://tieba.baidu.com/p/3938045873" target="_blank" rel="external">http://tieba.baidu.com/p/3938045873</a> 中匹配所有邮箱</p>
<ol>
<li><p>在 console 中写一个正则：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\w+@\w+\.\w+/g</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在 document.body.innerText 中匹配：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.body.innerText.match(reg);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="/images/js/reg.png" alt=""></p>
<h2 id="常见需求练习"><a href="#常见需求练习" class="headerlink" title="常见需求练习"></a>常见需求练习</h2><p>一、有数字，下划线，大小写英文字母，不能以数字打头，最大长度不能超过16<br>正则一：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^[a-zA-Z_]\w&#123;0,15&#125;$/</span></span><br></pre></td></tr></table></figure></p>
<p>正则二：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^[^\d]\w&#123;0,15&#125;$/</span></span><br></pre></td></tr></table></figure></p>
<p>注意这里意思是首位不能为数字，但是正则二空格，点等特殊字符并不能排除，这不太符合常规</p>
<p>二、 匹配字符串中某一段字符<br>如：<a href="http://www.baidu.com/order/121221212?=112" target="_blank" rel="external">http://www.baidu.com/order/121221212?=112</a> 获得 121221212<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> url = <span class="string">'http://www.baidu.com/order/121221212?=112'</span>;</span><br><span class="line">url.match(<span class="regexp">/order\/(\w+)\?/</span>)[<span class="number">1</span>];</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RegExp/">RegExp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/正则表达式/">正则表达式</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





  
    <article id="post-变得更强！思维发散练习" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/05/变得更强！思维发散练习/" class="article-date">
  	<time datetime="2016-07-05T03:44:35.000Z" itemprop="datePublished">2016-07-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/05/变得更强！思维发散练习/">变得更强！思维发散练习</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="为什么要写这篇"><a href="#为什么要写这篇" class="headerlink" title="为什么要写这篇"></a>为什么要写这篇</h2><p>想学到大神们优秀的思想，敏锐的解决问题的思路！</p>
<h2 id="给定一个字符串，若字符串大于4位字符，则保留后四位，前面的字符用”-”代替"><a href="#给定一个字符串，若字符串大于4位字符，则保留后四位，前面的字符用”-”代替" class="headerlink" title="给定一个字符串，若字符串大于4位字符，则保留后四位，前面的字符用”#”代替"></a>给定一个字符串，若字符串大于4位字符，则保留后四位，前面的字符用”#”代替</h2><p>我的最优方案：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">maskStr</span>(<span class="params">cc</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> length = cc.length;</span><br><span class="line">    <span class="keyword">if</span> (length &gt; <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> cc.substr(<span class="number">0</span>, length - <span class="number">4</span>).replace(<span class="regexp">/./g</span>, <span class="string">'#'</span>) + cc.substr(length - <span class="number">4</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cc;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>让人眼前一亮的牛逼方案：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">maskify</span>(<span class="params">cc</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> cc.slice(<span class="number">0</span>, <span class="number">-4</span>).replace(<span class="regexp">/./g</span>, <span class="string">'#'</span>) + cc.slice(<span class="number">-4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>其实就是 slice 方法负数的妙用！</p>
<p>这里涉及到就是同为切割字符串的函数，slice 和 substr 有什么区别？</p>
<ul>
<li>slice(start,end) 接受两个参数<blockquote>
<p>start：要抽取的片断的起始下标。如果是负数，则该参数规定的是从字符串的尾部开始算起的位置。也就是说，-1 指字符串的最后一个字符，-2 指倒数第二个字符，以此类推。<br>end：紧接着要抽取的片段的结尾的下标。若未指定此参数，则要提取的子串包括 start 到原字符串结尾的字符串。如果该参数是负数，那么它规定的是从字符串的尾部开始算起的位置。</p>
</blockquote>
</li>
</ul>
<p><img src="/images/js/slice.png" alt=""></p>
<p>常用（隐藏手机号中间四位）：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeStr</span>(<span class="params">str</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//这里可以这样记，3-7 即  x&gt;3 &amp;&amp; x&lt;=7，x=4,5,6,7</span></span><br><span class="line">	<span class="keyword">return</span> str.slice(<span class="number">0</span>,<span class="number">3</span>) + str.slice(<span class="number">3</span>,<span class="number">7</span>).replace(<span class="regexp">/./g</span>,<span class="string">'#'</span>) + str.slice(<span class="number">7</span>,<span class="number">11</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>substr(start,length) 接受两个参数<blockquote>
<p>start    必需。要抽取的子串的起始下标。必须是数值。如果是负数，那么该参数声明从字符串的尾部开始算起的位置。也就是说，-1 指字符串中最后一个字符，-2 指倒数第二个字符，以此类推。<br>length 可选。子串中的字符数。必须是数值。如果省略了该参数，那么返回从 stringObject 的开始位置到结尾的字串。</p>
</blockquote>
</li>
</ul>
<p><strong>重要事项：ECMAscript 没有对 substr 方法进行标准化，因此反对使用它。</strong></p>
<h2 id="长度大于5位的字符串反向"><a href="#长度大于5位的字符串反向" class="headerlink" title="长度大于5位的字符串反向"></a>长度大于5位的字符串反向</h2><p>需求：输入一个字符串，形式为 hello world kobe，处理长度大于5位的字符串反向。返回结果 olleh dlrow kobe<br>我的方案：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">spinWords</span>(<span class="params">word</span>)</span>&#123;</span><br><span class="line">	word = word.split(<span class="string">' '</span>);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;word.length;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(word[i].length&gt;=<span class="number">5</span>)&#123;</span><br><span class="line">			word[i] = word[i].split(<span class="string">''</span>).reverse().join(<span class="string">''</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> word.join(<span class="string">' '</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>牛逼的方案1:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">spinWords</span>(<span class="params">word</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> word.split(<span class="string">' '</span>).map((word) =&gt; &#123;</span><br><span class="line">		<span class="keyword">return</span> (word.length&gt;<span class="number">4</span>)?word.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>):word</span><br><span class="line">	&#125;).join(<span class="string">' '</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>牛逼的方案2:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">spinWords</span>(<span class="params">word</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> word.replace(<span class="regexp">/\w&#123;5,&#125;/g</span>,(w) =&gt; &#123;</span><br><span class="line">		<span class="keyword">return</span> w.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这里 word.replace(/\w{5,}/g) 中 \w 表示匹配所有的下划线，字母，数字;{5,}表示前面的字符至少出现5次，g表示全局。</p>
<p><strong>牢记：字符串reverse的最常用方法 str.split(‘’).reverse().join(‘’)，先转为数组reverse，然后转回字符串</strong></p>
<h2 id="输入一个正整数，计算从1加到该数的合"><a href="#输入一个正整数，计算从1加到该数的合" class="headerlink" title="输入一个正整数，计算从1加到该数的合"></a>输入一个正整数，计算从1加到该数的合</h2><h2 id="我的方案"><a href="#我的方案" class="headerlink" title="我的方案"></a>我的方案</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">typeof</span> n !=<span class="string">'number'</span> || n&lt;=<span class="number">0</span> || n%<span class="number">1</span>!=<span class="number">0</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> sum=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		sum+=i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="更优的解决方案"><a href="#更优的解决方案" class="headerlink" title="更优的解决方案"></a>更优的解决方案</h2><p>首先，从1加到某数有个公式，呃，数学差连这个都忘了 n*(n+1)/2<br>其次，要想办法把简单的 if 转化成 三元表达式！！！<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> (<span class="keyword">typeof</span> n !=<span class="string">'number'</span> || n&lt;=<span class="number">0</span> || n%<span class="number">1</span>!=<span class="number">0</span>)?<span class="literal">false</span>:n*(n+<span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ps:判断一个数是否为正整数最简单的方法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>.isInteger(n) &amp;&amp; n &gt; <span class="number">0</span></span><br></pre></td></tr></table></figure></p>
<h2 id="输入一个字符串，判断该字符串中-x-和-o-的数量是否一致，不分大小写"><a href="#输入一个字符串，判断该字符串中-x-和-o-的数量是否一致，不分大小写" class="headerlink" title="输入一个字符串，判断该字符串中 x 和 o 的数量是否一致，不分大小写"></a>输入一个字符串，判断该字符串中 x 和 o 的数量是否一致，不分大小写</h2><p>我的方案：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">XO</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    str = str.split(<span class="string">''</span>);</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">0</span>,</span><br><span class="line">        o = <span class="number">0</span>;</span><br><span class="line">    str.map((data) =&gt; &#123;</span><br><span class="line">        <span class="keyword">switch</span> (data.toLowerCase()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'x'</span>:</span><br><span class="line">                x += <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'o'</span>:</span><br><span class="line">                o += <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> x == o;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>更优的解决方案：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">XO</span>(<span class="params">str</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> x = str.match(<span class="regexp">/x/g</span>);</span><br><span class="line">	<span class="keyword">var</span> o = str.match(<span class="regexp">/o/g</span>);</span><br><span class="line">	<span class="keyword">return</span> (x &amp;&amp; x.length) === (o &amp;&amp; o.length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>发现n多次处理数据匹配都是用正则更高效！<br>这里 match 的用法有两种：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stringObject.match(searchvalue)</span><br><span class="line">stringObject.match(regexp)</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>searchvalue    必需。规定要检索的字符串值。<br>regexp    必需。规定要匹配的模式的 RegExp 对象。如果该参数不是 RegExp 对象，则需要首先把它传递给 RegExp 构造函数，将其转换为 RegExp 对象。</p>
</blockquote>
<p>注意：</p>
<blockquote>
<p>如果 regexp 没有标志 g，那么 match() 方法就只能在 stringObject 中执行一次匹配。如果没有找到任何匹配的文本， match() 将返回 null。否则，它将返回一个数组，其中存放了与它找到的匹配文本有关的信息。该数组的第 0 个元素存放的是匹配文本，而其余的元素存放的是与正则表达式的子表达式匹配的文本。除了这些常规的数组元素之外，返回的数组还含有两个对象属性。index 属性声明的是匹配文本的起始字符在 stringObject 中的位置，input 属性声明的是对 stringObject 的引用。<br>如果 regexp 具有标志 g，则 match() 方法将执行全局检索，找到 stringObject 中的所有匹配子字符串。若没有找到任何匹配的子串，则返回 null。如果找到了一个或多个匹配子串，则返回一个数组。不过全局匹配返回的数组的内容与前者大不相同，它的数组元素中存放的是 stringObject 中所有的匹配子串，而且也没有 index 属性或 input 属性。</p>
</blockquote>
<h2 id="给定一个秒数，转换为-HH-mm-ss"><a href="#给定一个秒数，转换为-HH-mm-ss" class="headerlink" title="给定一个秒数，转换为 HH:mm:ss"></a>给定一个秒数，转换为 HH:mm:ss</h2><p>大神的代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">humanReadable</span>(<span class="params">seconds</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> pad = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123; <span class="keyword">return</span> (x &lt; <span class="number">10</span>) ? <span class="string">"0"</span>+x : x; &#125;</span><br><span class="line">  <span class="keyword">return</span> pad(<span class="built_in">parseInt</span>(seconds / (<span class="number">60</span>*<span class="number">60</span>))) + <span class="string">":"</span> +</span><br><span class="line">         pad(<span class="built_in">parseInt</span>(seconds / <span class="number">60</span> % <span class="number">60</span>)) + <span class="string">":"</span> +</span><br><span class="line">         pad(seconds % <span class="number">60</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





  
    <article id="post-常用的css交互集合" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/05/常用的css交互集合/" class="article-date">
  	<time datetime="2016-07-05T01:22:34.000Z" itemprop="datePublished">2016-07-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/05/常用的css交互集合/">常用的css交互集合</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="图片缩放效果"><a href="#图片缩放效果" class="headerlink" title="图片缩放效果"></a>图片缩放效果</h2><p>第一次看到是在慕课网，第一次做网站就用上了<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">.box &#123;</span><br><span class="line">    width: <span class="number">200</span>px;</span><br><span class="line">    height: <span class="number">100</span>px;</span><br><span class="line">    background-color: pink;</span><br><span class="line">    margin: <span class="number">0</span> auto;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.box img &#123;</span><br><span class="line">    width: <span class="number">100</span>%;</span><br><span class="line">    height: <span class="number">100</span>%;</span><br><span class="line">    transition: <span class="number">0.3</span>s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.box:hover img &#123;</span><br><span class="line">    transform: scale(<span class="number">1.2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"box"</span>&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/1.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">css</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css3/">css3</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/动画/">动画</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





  
    <article id="post-men-s-talk" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/05/men-s-talk/" class="article-date">
  	<time datetime="2016-07-05T01:20:23.000Z" itemprop="datePublished">2016-07-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/05/men-s-talk/">men&#39;s talk</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="views"><a href="#views" class="headerlink" title="views"></a>views</h2><p>Russell Westbrook：He always has my back and I’ll always have his.<br><img src="/images/nba/kdwb.jpg" alt=""></p>
<p>Popovich on Tim Duncan</p>
<blockquote>
<p>I can still remember, before his father passed away, him looking at me in the eye and saying, “I’m going to hold you responsible to make sure that when he’s done, he’s the same person that he is now.”</p>
<p>In that respect he, is. He’s grown as a person as we all do through experiences but his inner core — he was over himself when he came in and after all these accolades and all the success, he’s still gotten over himself. Hasn’t changed a lick.</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/men/">men</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/views/">views</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>





  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 xwillmadeit
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






  </div>
</body>
</html>