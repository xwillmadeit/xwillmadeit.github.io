<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="xwillmadeit">
<meta property="og:url" content="https://xwillmadeit.github.io/index.html">
<meta property="og:site_name" content="xwillmadeit">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="xwillmadeit">
<meta name="twitter:description">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="https://xwillmadeit.github.io/"/>


  <title> xwillmadeit </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">xwillmadeit</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/22/Webpack-Loaders/" itemprop="url">
                  Webpack Loaders 进阶
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-08-22T16:04:44+08:00" content="2017-08-22">
              2017-08-22
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="什么是-Loaders"><a href="#什么是-Loaders" class="headerlink" title="什么是 Loaders"></a>什么是 Loaders</h1><p><a href="https://webpack.js.org/concepts/loaders/" target="_blank" rel="external">Loaders</a> 可以认为是 import 或 “load” 模块时的预处理工具。它可以对导入的不同类型的模块（css，ts，png）进行转化，成为 javascript 代码</p>
<h1 id="核心原理"><a href="#核心原理" class="headerlink" title="核心原理"></a>核心原理</h1><p>一个 loader 是一个 node module，导出一个方法，该方法接收一个参数（导入模块的内容，stream 或 string），返回一个经过转换的新字符串（或 stream），这就是 loader 的工作原理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// simplest loader</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> source</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Loaders-主要特性"><a href="#Loaders-主要特性" class="headerlink" title="Loaders 主要特性"></a>Loaders 主要特性</h1><ul>
<li>支持级连，从右向左处理，每个 loader 都返回处理完成的代码给下一个 loader</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>]</span><br></pre></td></tr></table></figure>
<ul>
<li><p>loaders 可以是异步也可以是同步</p>
</li>
<li><p>loaders 可以输出任意文件（emit files）<br>如 file-loader</p>
</li>
<li><p>loaders 可以接受参数，主要有两种方式传入参数</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. query string</span></span><br><span class="line">use: <span class="string">'file-loader?name=images/[hash].[ext]'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. options</span></span><br><span class="line">use: &#123;</span><br><span class="line">  loader: <span class="string">'file-loader'</span>,</span><br><span class="line">  options: &#123;</span><br><span class="line">    name: <span class="string">'[hash].[ext]'</span>,</span><br><span class="line">    outputPath: <span class="string">'images/'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 loaders 中接受参数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loaderUtils = <span class="built_in">require</span>(<span class="string">'loader-utils'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> options = loaderUtils.getOptions(<span class="keyword">this</span>)</span><br><span class="line">  <span class="keyword">return</span> source</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意，上面的 options 值主要有几种情况：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. passing config using query string like</span></span><br><span class="line">use: <span class="string">'file-loader?name=images/[hash].[ext]'</span></span><br><span class="line"><span class="comment">// options equals to the query Object</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. passing config using options like</span></span><br><span class="line">use: &#123;</span><br><span class="line">  loader: <span class="string">'file-loader'</span>,</span><br><span class="line">  options: &#123;</span><br><span class="line">    name: images/[hash].[ext]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// options equals to the options object</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. passing config using both query and options</span></span><br><span class="line">use: &#123;</span><br><span class="line">  loader: <span class="string">'file-loader?name=images/[hash].[ext]'</span>,</span><br><span class="line">  options: &#123;</span><br><span class="line">    name: images/[hash].[ext]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// options equals to the options object</span></span><br></pre></td></tr></table></figure>
<h1 id="如何写一个-loader-？"><a href="#如何写一个-loader-？" class="headerlink" title="如何写一个 loader ？"></a>如何写一个 loader ？</h1><p>我写了一个 <a href="https://github.com/xwillmadeit/webpack-custom-loader" target="_blank" rel="external">demo</a>，展示 loaders 是怎么工作的，包含如何调试 loaders </p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/30/javascript-中的加减操作符/" itemprop="url">
                  javascript 加减操作符中的类型转换
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-07-30T08:23:01+08:00" content="2017-07-30">
              2017-07-30
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="为什么-1-“1”-不等于-2，”5”-2-等于-3？"><a href="#为什么-1-“1”-不等于-2，”5”-2-等于-3？" class="headerlink" title="为什么 1 + “1” 不等于 2，”5” - 2 等于 3？"></a>为什么 1 + “1” 不等于 2，”5” - 2 等于 3？</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为什么不等于 2</span></span><br><span class="line"><span class="number">1</span> + <span class="string">"1"</span> <span class="comment">// "11"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 为什么等于 3</span></span><br><span class="line"><span class="string">"5"</span> - <span class="number">2</span> <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<p>解答这个问题，我们必须了解 +（Addition Operator）和 -（Subtraction Operator） 的工作原理</p>
<h2 id="加号操作符-The-Addition-operator"><a href="#加号操作符-The-Addition-operator" class="headerlink" title="加号操作符 The Addition operator"></a>加号操作符 The Addition operator</h2><p>直接上<a href="http://www.ecma-international.org/ecma-262/5.1/#sec-11.6.1" target="_blank" rel="external">文档</a> </p>
<blockquote>
<ul>
<li>If Type(lprim) is String or Type(rprim) is String, then<br>a. Return the String that is the result of concatenating ToString(lprim) followed by ToString(rprim)</li>
<li>Return the result of applying the addition operation to ToNumber(lprim) and ToNumber(rprim)</li>
</ul>
</blockquote>
<p>可以看到文档中写的很清楚，如果在<b>加号的两边有一边是 string 类型，那么相加的时候，两边都会转化成 string</b>，进行字符串拼接（string concatenation），如果加号两边都是 number 类型，则进行数字相加运算（numeric operands）</p>
<p>MDN 上关于 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Addition" target="_blank" rel="external">Addition Operator</a> 操作符号的相关介绍</p>
<blockquote>
<p>The addition operator produces the sum of numeric operands or string concatenation.</p>
</blockquote>
<p>PS：如果加号两边有 boolean 值的话，该 boolean 值会被转化为 0 或 1，如</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">true</span> + <span class="number">5</span> <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>
<h2 id="减号操作符-The-Subtraction-Operator"><a href="#减号操作符-The-Subtraction-Operator" class="headerlink" title="减号操作符 The Subtraction Operator"></a>减号操作符 The Subtraction Operator</h2><p><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-11.6.2" target="_blank" rel="external">文档</a></p>
<blockquote>
<ul>
<li>Let lnum be ToNumber(lval).</li>
<li>Let rnum be ToNumber(rval).</li>
<li>Return the result of applying the subtraction operation to lnum and rnum</li>
</ul>
</blockquote>
<p>可以看到减号操作符会把左右两边都转为 number 类型进行运算</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"5"</span> - <span class="number">2</span> <span class="comment">// 3</span></span><br><span class="line"><span class="number">5</span> - <span class="string">"2"</span> <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<h2 id="5-”5”-为什么等于-10"><a href="#5-”5”-为什么等于-10" class="headerlink" title="5 + +”5” 为什么等于 10"></a>5 + +”5” 为什么等于 10</h2><p>这里字符串前面的加号是 <a href="http://www.ecma-international.org/ecma-262/5.1/#sec-11.4.6" target="_blank" rel="external">Unary + Operator</a></p>
<p>关于 Unary + Operator 的介绍：</p>
<blockquote>
<p>The production UnaryExpression : + UnaryExpression is evaluated as follows:</p>
<ol>
<li>Let expr be the result of evaluating UnaryExpression.</li>
<li>Return ToNumber(GetValue(expr)).</li>
</ol>
</blockquote>
<p>下面的表达式可拆分为两个步骤，首先对 + 右边的表达式进行求值，然后将返回的结果转化为数字</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+<span class="string">"5"</span> <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line">+<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="string">"5"</span>&#125;() <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/29/为什么IIFE语法需要小括号包裹/" itemprop="url">
                  为什么IIFE语法需要小括号包裹
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-07-29T17:09:58+08:00" content="2017-07-29">
              2017-07-29
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="IIFE-的语法"><a href="#IIFE-的语法" class="headerlink" title="IIFE 的语法"></a>IIFE 的语法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'hello'</span>)</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">// or</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'hello'</span>)</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<p>我们经常使用上面的语法来创建一个代码块，好处是能够将变量作用域保存在自执行函数中，不污染外部的变量，那么，为什么下面的语法会报错呢？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'hello'</span>)</span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure>
<p>要弄清楚为什么报错，我们必须理解函数表达式和函数声明的区别</p>
<h2 id="函数声明（Function-Declaration）和-函数表达式-Function-Expression"><a href="#函数声明（Function-Declaration）和-函数表达式-Function-Expression" class="headerlink" title="函数声明（Function Declaration）和 函数表达式 (Function Expression)"></a>函数声明（Function Declaration）和 函数表达式 (Function Expression)</h2><p>最显而易见的区别，是两者定义函数方式的区别：</p>
<p>函数声明</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>函数表达式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="keyword">const</span> say = <span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>关于函数声明和函数表达式的更详细区别，不在本文赘述</p>
<h2 id="为什么函数声明后面加一个小括号会报错？"><a href="#为什么函数声明后面加一个小括号会报错？" class="headerlink" title="为什么函数声明后面加一个小括号会报错？"></a>为什么函数声明后面加一个小括号会报错？</h2><p>答案很简单，调用一个使用函数声明定义的函数，必须使用函数名</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">say()</span><br><span class="line"></span><br><span class="line"><span class="comment">// not work</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure>
<p>而用一对括号 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Grouping" target="_blank" rel="external">Group Operator</a> 包裹住函数，实际上是把函数声明转换成了函数表达式，而函数表达式可以有函数名也可以匿名</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以拆成两步理解 </span></span><br><span class="line"><span class="comment">// 1. 用括号包住函数，Group Operator 会进行一次求值 (evaluated)，会返回一个变量</span></span><br><span class="line"><span class="keyword">var</span> say = (<span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 2. 对该变量进行函数调用</span></span><br><span class="line">say()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 省去变量赋值相当于</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<p>PS：() 操作符只能对表达式求值，所以被括号包裹住的函数是函数表达式定义的函数，这也是为什么这种自执行函数被叫做 IIFE（Immediately Invoked Function Expression），立即执行函数表达式</p>
<h2 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h2><p>那么，是不是只要想办法让解析器在遇到函数声明的时候能够进行一次求值转化为函数表达式，就能正常运行呢？</p>
<p>解决方法：</p>
<ul>
<li><p>逗号操作符 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comma_Operator" target="_blank" rel="external">Comma Operator</a></p>
</li>
<li><p>非操作符号 <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Guide/Expressions_and_Operators#Logical_operators" target="_blank" rel="external">Logical Not Operator</a></p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>, <span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params"></span>)</span>&#123;&#125;() </span><br><span class="line"></span><br><span class="line">!<span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params"></span>)</span>&#123;&#125;()</span><br><span class="line"></span><br><span class="line">+<span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params"></span>)</span>&#123;&#125;()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>
<p>只要能让该函数出现在的位置能被解析器当作表达式进行一次求值（evaluated）即可</p>
<p>参考：<br><a href="https://stackoverflow.com/questions/1634268/explain-the-encapsulated-anonymous-function-syntax" target="_blank" rel="external">Explain the encapsulated anonymous function syntax</a><br><a href="https://www.zhihu.com/question/20249179" target="_blank" rel="external">JavaScript 匿名函数有哪几种执行方式?</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/25/情商2读书笔记/" itemprop="url">
                  情商2读书笔记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-07-25T19:29:56+08:00" content="2017-07-25">
              2017-07-25
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>我们越是专心，就越能敏锐迅速的感受到他人的内心世界，不管周围环境多么复杂，他人的情感暗示多么细微。相反，我们越是紧张，就越难产生同理心。简而言之，不管什么形式的自我封闭都会扼杀同理心的产生，更不要说同情了。当我们以自我为中心时，我们遇到的问题就会越来越多，自我封闭就会越来越严重，我们的世界就会越来越小。而当我们关注他人时，我们的世界就会越来越丰富多彩，我们自己的问题就会显得渺小，而且我们的交往能力可以得到加强，从而引发帮助他人的善举。(p46)</p>
</li>
<li><p>有意识的对别人多加关注可能是推动和谐人际关系的最佳方式。仔细倾听并专心致志，会激发和谐的要素——一致性和积极情感的产生。设身处地是社交上中最核心的能力之一。设身处地是美满婚姻的一个要素。（p80, 81 倾听和设身处地的重要性）</p>
</li>
<li><p>在工作中，关怀他人并且承担起帮助他们的责任有助于建立良好的人际关系。总会有一些人非常乐意花费自己的时间和精力去帮助其他同事。他们不仅仅关心自己手头的工作，因为他们明白合作能够实现更高的集体目标。（p88）</p>
</li>
<li><p>三心二意是现代生活的通病，在任何交流中都会造成伤害，特别是在对方情绪不佳的时候。（p96）</p>
</li>
<li><p>日本文化（或者说整个东亚文化）中的价值观高度重视对别人需要主动提供帮助的行为。（p99）</p>
</li>
<li><p>恋人们关系是否能够长久的最重要的指标是他们之间分享的积极情绪的多寡。消极的交流肯定不会预示着幸福的婚姻。他们对彼此越是不满，在争吵过程中双方的情绪就会越激动。在处理分歧的过程中，他们之间出现的消极情绪越强烈，今后的婚姻状况就越不稳定。快乐与不和谐的比例 5 : 1，说明夫妻有足够的健康情绪储备。（p204）</p>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/29/react-transition-group使用方法/" itemprop="url">
                  react-transition-group 使用方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-29T11:58:58+08:00" content="2017-06-29">
              2017-06-29
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="初始化渲染-Transition"><a href="#初始化渲染-Transition" class="headerlink" title="初始化渲染 Transition"></a>初始化渲染 Transition</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">CSSTransitionGroup</span></span><br><span class="line">      <span class="attr">transitionName</span>=<span class="string">"example"</span></span><br><span class="line">      <span class="attr">transitionAppear</span>=<span class="string">&#123;true&#125;</span></span><br><span class="line">      <span class="attr">transitionAppearTimeout</span>=<span class="string">&#123;500&#125;</span></span><br><span class="line">      <span class="attr">transitionEnter</span>=<span class="string">&#123;false&#125;</span></span><br><span class="line">      <span class="attr">transitionLeave</span>=<span class="string">&#123;false&#125;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Fading at Initial Mount<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">CSSTransitionGroup</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// css</span></span><br><span class="line">.example-appear &#123;</span><br><span class="line">  opacity: <span class="number">0.01</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.example-appear.example-appear-active &#123;</span><br><span class="line">  opacity: <span class="number">1</span>;</span><br><span class="line">  transition: opacity <span class="number">.5</span>s ease-<span class="keyword">in</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>必须设置 transitionName 属性，用于相应名称的 css 选择器<br>transitionAppear 默认值为 false，如需组件一加载就 transition，则设置为 true<br>在这里如果不需要 transitionEnter，transitionLeave，则需设置为 false（默认为 true）</p>
<h2 id="动态增加、删除及显示隐藏-Transition"><a href="#动态增加、删除及显示隐藏-Transition" class="headerlink" title="动态增加、删除及显示隐藏 Transition"></a>动态增加、删除及显示隐藏 Transition</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">CSSTransitionGroup</span></span><br><span class="line">      <span class="attr">transitionName</span>=<span class="string">"example"</span></span><br><span class="line">      <span class="attr">transitionEnterTimeout</span>=<span class="string">&#123;500&#125;</span></span><br><span class="line">      <span class="attr">transitionLeaveTimeout</span>=<span class="string">&#123;500&#125;</span></span><br><span class="line">    &gt;</span></span><br><span class="line">      &#123; this.state.show &amp;&amp; </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>toggled element<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">CSSTransitionGroup</span>&gt;</span></span></span><br><span class="line">  ）</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// css</span></span><br><span class="line">.example-enter &#123;</span><br><span class="line">  opacity: <span class="number">0.01</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.example-enter.example-enter-active &#123;</span><br><span class="line">  opacity: <span class="number">1</span>;</span><br><span class="line">  transition: opacity <span class="number">500</span>ms ease-<span class="keyword">in</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.example-leave &#123;</span><br><span class="line">  opacity: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.example-leave.example-leave-active &#123;</span><br><span class="line">  opacity: <span class="number">0.01</span>;</span><br><span class="line">  transition: opacity <span class="number">300</span>ms ease-<span class="keyword">in</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/reactjs/react-transition-group/tree/v1-stable" target="_blank" rel="external">官方文档</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/28/node-glob使用/" itemprop="url">
                  node-glob使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-28T06:37:47+08:00" content="2017-06-28">
              2017-06-28
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Set-up"><a href="#Set-up" class="headerlink" title="Set up"></a>Set up</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D glob</span><br></pre></td></tr></table></figure>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">glob(pattern, [options], (err, files) =&gt; &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p><b>Pattern 1</b>  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src<span class="comment">/**/</span>*</span><br></pre></td></tr></table></figure>
<p>改方法会递归匹配src文件夹下，任意子文件夹和文件 (不会匹配.开头的文件)</p>
<p><img src="/images/glob/**:*.jpeg" alt=""></p>
<p>设置 dot: true 参数可将 . 当作普通字符</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">glob(<span class="string">'src/**/*'</span>, &#123; dot: <span class="literal">true</span> &#125;, (err, files) =&gt; &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><b>Pattern 2</b>  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src<span class="comment">/**/</span>*.*</span><br></pre></td></tr></table></figure>
<p>改方法会递归匹配src文件夹下，任意子文件，不会匹配文件夹</p>
<p><img src="/images/glob/anyfile.png" alt=""></p>
<p><b>Pattern 3</b> </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src<span class="comment">/**/</span>*.*(js|scss)</span><br></pre></td></tr></table></figure>
<p>改方法会递归匹配src文件夹下，任意后缀为 js 或 scss 的文件</p>
<p><img src="/images/glob/anyfile.png" alt=""></p>
<p><b>Pattern 4</b> </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src<span class="comment">/**/</span>*.!(js|scss)</span><br></pre></td></tr></table></figure>
<p>改方法会递归匹配src文件夹下，任意后缀不为 js 或 scss 的文件</p>
<p><img src="/images/glob/not.png" alt=""></p>
<p><b>Pattern 5</b> </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.*</span><br></pre></td></tr></table></figure>
<p>改方法会匹配当文件夹下，任意以 . 开头的文件 (.babelrc, .eslintrc)</p>
<p>关于 “.”</p>
<blockquote>
<p>If a file or directory path portion has a . as the first character, then it will not match any glob pattern unless that pattern’s corresponding path part also has a . as its first character.<br>For example, the pattern a/.<em>/c would match the file at a/.b/c. However the pattern a/</em>/c would not, because * does not start with a dot character.<br>You can make glob treat dots as normal characters by setting dot:true in the options.</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/18/心静的力量/" itemprop="url">
                  心静的力量
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-18T07:50:41+08:00" content="2017-06-18">
              2017-06-18
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Section-2"><a href="#Section-2" class="headerlink" title="Section 2"></a>Section 2</h2><p>充满怨恨和嫉妒的人显然得不到内心平静，他们的人生会因为怨恨和嫉妒而走味。失败的人往往一看到成功的人就感到厌恶。成功人士对于别人的成功都会语带赞美，态度不是嫉妒，而是愿意向他人学习。反观失败的人，他们则会想尽办法对成功的人提出一些恶意批评。假如那个人做生意的方式找不到任何可议之处，就会从别的方面来挑毛病。怨恨显而易见，比这个更糟糕的还有一个可悲的要实：这种人不但享受不到金钱所能买到的东西，也得不到内心平静</p>
<h2 id="不要为了成功而伤害任何人"><a href="#不要为了成功而伤害任何人" class="headerlink" title="不要为了成功而伤害任何人"></a>不要为了成功而伤害任何人</h2><p>如今是以提供服务为导向的大型企业时代，力公室人员常多如牛毛。工厂里的人通常是以他的产出来接受评断，但白领可以靠各种性格上的把戏<br>书面作业的把戏、把错误的责任推到别人身上等等的把戏来往上爬。踩在别人头上步步高升会使你所赚的钱沦为笑柄，这么做得不到内心平静，往往也得不到健康、快乐和家庭和谐。所剩下的只有用钱买得到的东西，而且不快乐的程度会比乞丐还强烈。</p>
<h2 id="永远多一份付出"><a href="#永远多一份付出" class="headerlink" title="永远多一份付出"></a>永远多一份付出</h2><p>愿意做的比必须做的多是一帖兴奋剂，这本身就是赚大钱的人，优秀的领导者以及快乐又有热忱的人所具备的特色，他们天天都在为生活创造价值。</p>
<p>看到自己往上爬到了一阶梯子，再往上方一阶，以及前方有所回报的许多阶，这个画面就会深植在你内心，并激励你往上爬。万一遇到付出额外努力却得不到回报的情形，充满正面能量的内心就会找来勇气与谋略。你会离开不适合自己的工作，把它送进过往，然后去找另一份由想象中的画面转变为现实的工作。从哪里开始绝对远远比不上要往哪里去来得重要，在内心里好好构思并开始前进才是首要之务。</p>
<p>尤其在工作上，怨恨和愤概的情绪会损害内心构思与实践的能力。多一分付出对于摆脱内心存在的障碍具有振起的作用。对工作的投入要超越所领的薪酬，随时让白己有资格晋升到上一阶或上几阶。成功的人不会是心怀怨恨或者不全力以赴的人，而会是一言一行都在为更远大目标铺路的人。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/15/好用的npm包整理/" itemprop="url">
                  好用的前端库／包整理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-15T14:50:54+08:00" content="2017-06-15">
              2017-06-15
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Surge"><a href="#Surge" class="headerlink" title="Surge"></a>Surge</h1><p><a href="http://surge.sh/" target="_blank" rel="external">Surge</a> 是一个静态资源部署工具，支持一行命令部署静态资源到 project.surge.sh，只需要指定需部署的文件夹以及二级域名</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// installation</span></span><br><span class="line">npm install -g surge</span><br><span class="line"></span><br><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"deploy"</span>: <span class="string">"surge /Users/xwill/learnCode/freeCode/vanilla xwillmadeit.surge.sh"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// deploy</span></span><br><span class="line">npm run deploy</span><br></pre></td></tr></table></figure>
<h1 id="now"><a href="#now" class="headerlink" title="now"></a>now</h1><p><a href="https://zeit.co/now" target="_blank" rel="external">now</a> 是 zeit 出品的命令行一键部署工具，支持部署 node 项目以及静态网站项目</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// installation</span></span><br><span class="line">npm i -g now</span><br></pre></td></tr></table></figure>
<h3 id="静态网站部署"><a href="#静态网站部署" class="headerlink" title="静态网站部署"></a>静态网站部署</h3><p>在需要部署的目录（如 dist，有 index.html），直接执行 now 即可，每次部署会生成一个随机 url，类似于 <a href="https://dist-ktxztztigq.now.sh" target="_blank" rel="external">https://dist-ktxztztigq.now.sh</a></p>
<h3 id="node-项目部署（以-zeit-的-micro-为例）"><a href="#node-项目部署（以-zeit-的-micro-为例）" class="headerlink" title="node 项目部署（以 zeit 的 micro 为例）"></a>node 项目部署（以 zeit 的 micro 为例）</h3><p>参考<a href="https://zeit.co/now#get-started" target="_blank" rel="external">官方</a> </p>
<h3 id="删除当前正在部署的进程"><a href="#删除当前正在部署的进程" class="headerlink" title="删除当前正在部署的进程"></a>删除当前正在部署的进程</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">now rm app-name</span><br></pre></td></tr></table></figure>
<h3 id="修改-url："><a href="#修改-url：" class="headerlink" title="修改 url："></a><a href="https://zeit.co/docs/features/aliases#creating-aliases" target="_blank" rel="external">修改 url</a>：</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">now alias https:<span class="comment">//dist-etjnigdrkz.now.sh hello</span></span><br></pre></td></tr></table></figure>
<h3 id="Tricks-部署一个带有-Browser-History-路由的-SPA"><a href="#Tricks-部署一个带有-Browser-History-路由的-SPA" class="headerlink" title="Tricks - 部署一个带有 Browser History 路由的 SPA"></a>Tricks - 部署一个带有 Browser History 路由的 SPA</h3><p>以 create-react-app 为例，执行构建后，会生成一个 build 文件夹，在 build 文件夹中执行</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>
<p>生成 package.json，修改相应的 package.json 信息，然后添加 scripts</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"start"</span>: <span class="string">"serve --single"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后安装 serve</p>
<pre><code class="js">npm i -S serve
</code></pre>
<p>最后执行 now 即可</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/07/如何发布自己的npm包/" itemprop="url">
                  如何发布自己的npm包
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-07T10:11:24+08:00" content="2017-06-07">
              2017-06-07
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><p>在 npm 上发布一个适合团队代码风格的 eslint 配置包，项目名称为 <b>eslint-config-vpgame</b></p>
<h2 id="开发-eslint-config-vpgame"><a href="#开发-eslint-config-vpgame" class="headerlink" title="开发 eslint-config-vpgame"></a>开发 eslint-config-vpgame</h2><p>如何编写这个包并不是重点，代码直接戳<a href="https://github.com/xwillmadeit/eslint-config-vpgame" target="_blank" rel="external">这里</a></p>
<h2 id="使用-npm-link-调试工具包"><a href="#使用-npm-link-调试工具包" class="headerlink" title="使用 npm link 调试工具包"></a>使用 npm link 调试工具包</h2><p>假定我们的包已经开发完毕，我们需要在其他项目中安装这个包进行测试。众所周知，如果在项目中需要引入 eslint-config-vpgame 包的话，我们需要执行<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install eslint-config-vpgame --save-dev</span><br></pre></td></tr></table></figure></p>
<p>但是在开发这个包的时候，我们不可能每次先发布到 npm 仓库，然后再在其他项目中使用 npm install 的形式来进行测试，我们希望在其他工程中能实时测试当前正在开发的 npm 包的效果，这里我们需要用到 npm link 命令</p>
<p>在当前开发的 eslint-config-vpgame 目录下执行<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm link</span><br></pre></td></tr></table></figure></p>
<p>npm 会把该包关联到本机的 npm 全局安装目录下，即模拟了安装的效果</p>
<p><b>在另一个项目中使用：</b><br>创建新项目 some-project：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br><span class="line">npm link eslint-config-vpgame</span><br></pre></td></tr></table></figure></p>
<p>此时该项目会增加一个 node_modules 文件夹，即实现了 npm install 效果<br>当修改 eslint-config-vpgame 包的时候，该项目 node_modules 文件夹下的 eslint-config-vpgame 包也会自动更新</p>
<p><b>wow…大大的节省了测试时间</b></p>
<h2 id="发布到-npm"><a href="#发布到-npm" class="headerlink" title="发布到 npm"></a>发布到 npm</h2><p>到这步就很简单了，在 eslint-config-vpgame 项目根目录下执行<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure></p>
<p>如果没有帐号的话，按照提示设置一下就好了… 大功告成</p>
<p>PS：注意，最好先建好 git repo，然后 npm init -y 初始化项目，这样 package.json 中会关联 repo 地址，npm 项目主页面就可以展示 git repo 地址</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/06/Jenkins自动化集成/" itemprop="url">
                  Jenkins自动化集成
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-06T17:52:01+08:00" content="2017-06-06">
              2017-06-06
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="什么是-Jenkins"><a href="#什么是-Jenkins" class="headerlink" title="什么是 Jenkins"></a>什么是 Jenkins</h2><p><a href="https://jenkins.io/" target="_blank" rel="external">https://jenkins.io/</a></p>
<h2 id="安装和启动"><a href="#安装和启动" class="headerlink" title="安装和启动"></a>安装和启动</h2><p>将下载完的 jenkins.war 上传至服务器<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp /Users/xwill/Downloads/jenkins.war root@<span class="number">115.28</span><span class="number">.136</span><span class="number">.223</span>:<span class="regexp">/usr/</span>local/jenkins</span><br></pre></td></tr></table></figure></p>
<p>启动 Jenkins</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar jenkins.war</span><br></pre></td></tr></table></figure>
<p>这里默认服务器上已经装了 JDK，服务启动之后，在 8080 端口访问，进行一些列配置后，jenkins 搭建完毕</p>
<h2 id="集成-github"><a href="#集成-github" class="headerlink" title="集成 github"></a>集成 github</h2><p><b>首先配置 Github 相关内容</b><br>Github 个人设置中生成一个 Personal Access Token<br><img src="/images/jenkins/githubtoken.png" alt=""></p>
<p>在 Project Setting 中添加 Jenkins Hook URL<br><img src="/images/jenkins/githubJenkinsHook.png" alt=""></p>
<p>配置 Jenkins 的 Github 配置<br><img src="/images/jenkins/configuresystem.png" alt=""></p>
<p>找到 Github 区域，API URL 默认不变，点击 Add 创建一个新的证书<br><img src="/images/jenkins/githubconfig.png" alt=""></p>
<p>Kind 选择 Secret text，Secret 填写 Personal Access Token<br><img src="/images/jenkins/addToken.png" alt=""></p>
<p><b>系统配置完后，我们可以新建项目了</b><br>在 jenkins 后台新建 freestyle project<br><img src="/images/jenkins/newJob.png" alt=""></p>
<p>在 general 面板勾选 Github project，填入 Project url<br><img src="/images/jenkins/general.png" alt=""></p>
<p>在 Source Code Management 面板勾选 Git，填入 Repository URL，其他保持默认即可<br><img src="/images/jenkins/sourceCode.png" alt=""></p>
<p>在 Build Triggers 面板勾选 GitHub hook trigger for GITScm polling<br><img src="/images/jenkins/buildTriggers.png" alt=""></p>
<p>在 Build Panel 面板选择 Execute shell，填入 npm run build（举个栗子）<br><img src="/images/jenkins/buildPanel.png" alt=""></p>
<p>完成以上配置以后，点击 Save，项目就创建完成了。此时如果提交修改并 push 最新代码到 github，Jenkins 会帮你执行：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git pull</span><br><span class="line">npm run build</span><br></pre></td></tr></table></figure></p>
<p>构建相关信息可在项目页面找到<br><img src="/images/jenkins/buildHistory.png" alt=""></p>
<p>PS：服务器上默认的代码被放在下面目录<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/root/.jenkins/workspace</span><br></pre></td></tr></table></figure></p>
<h2 id="集成-Gitlab"><a href="#集成-Gitlab" class="headerlink" title="集成 Gitlab"></a>集成 Gitlab</h2><p><b>准备工作：</b><br>把服务器的 SSH Key 填到 gitlab 中，使服务器（Jenkins）有权限拉取 gitlab 的代码<br>在 Jenkins 中搜索 gitlab 相关插件，全部安装即可</p>
<p><b>集成：</b><br>首先配置系统的 gitlab 相关内容（Configure System）<br><img src="/images/jenkins/gitlabConfig.png" alt=""></p>
<p>这里的证书选择 gitlab 的 Token，如果没有的话添加一个，步骤参考集成 github 中新增 token 的操作。token 可在 gitlab 个人设置的 Account 中找到<br><img src="/images/jenkins/gitlabToken.png" alt=""></p>
<p>后续创建项目的步骤与 github 类似，需要注意两点：<br>repo 地址使用 ssh 格式<br><img src="/images/jenkins/gitlabssh.png" alt=""></p>
<p>gitlab 相关项目的 Web Hooks 地址设置为：<br><img src="/images/jenkins/gitlabtriggerurl.png" alt=""><br><img src="/images/jenkins/gitlabhook.png" alt=""> </p>
<p>其他与 github 一样</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="xwillmadeit" />
          <p class="site-author-name" itemprop="name">xwillmadeit</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">44</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">48</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">xwillmadeit</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  




  
  

  

  

  

  


</body>
</html>
